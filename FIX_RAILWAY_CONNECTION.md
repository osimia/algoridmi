# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Railway –ë–î

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

```
django.db.utils.OperationalError: could not translate host name "switchback.proxy.rlwy.net" to address: Name or service not known
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ:
1. Railway –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –∏–∑-–∑–∞ —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º
2. –•–æ—Å—Ç –∏–∑–º–µ–Ω–∏–ª—Å—è –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
3. –ü—Ä–æ–±–ª–µ–º—ã —Å DNS

## ‚úÖ –†–µ—à–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å DATABASE_URL

1. –ó–∞–π–¥–∏—Ç–µ –≤ Railway Dashboard: https://railway.app/
2. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª PostgreSQL
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **–∞–∫—Ç—É–∞–ª—å–Ω—ã–π** `DATABASE_URL` –∏–ª–∏ `DATABASE_PUBLIC_URL`
5. –û–±–Ω–æ–≤–∏—Ç–µ –≤ —Ñ–∞–π–ª–µ `.env`:

```env
DATABASE_PUBLIC_URL=postgresql://postgres:password@new-host.railway.app:5432/railway
```

### –†–µ—à–µ–Ω–∏–µ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ö–æ—Å—Ç–∞
ping switchback.proxy.rlwy.net

# –ï—Å–ª–∏ –Ω–µ –ø–∏–Ω–≥—É–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
# 1. –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
# 2. Firewall/–∞–Ω—Ç–∏–≤–∏—Ä—É—Å
# 3. VPN (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
```

### –†–µ—à–µ–Ω–∏–µ 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Ö–æ—Å—Ç

Railway –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

1. **Private Network** (–≤–Ω—É—Ç—Ä–∏ Railway):
   ```
   DATABASE_URL=postgresql://...@postgres.railway.internal:5432/...
   ```

2. **Public Network** (–∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞):
   ```
   DATABASE_PUBLIC_URL=postgresql://...@switchback.proxy.rlwy.net:24216/...
   ```

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `DATABASE_PUBLIC_URL` –≤–º–µ—Å—Ç–æ `DATABASE_URL`.

### –†–µ—à–µ–Ω–∏–µ 4: –í—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é –ë–î –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–ï—Å–ª–∏ Railway –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î:

1. –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤ `.env`:
```env
# DATABASE_PUBLIC_URL=postgresql://...
# DATABASE_URL=postgresql://...
```

2. Django –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ SQLite

3. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:
```bash
python manage.py migrate
```

4. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —Ä–∞–±–æ—Ç—É –ª–æ–∫–∞–ª—å–Ω–æ

5. –ö–æ–≥–¥–∞ Railway —Å—Ç–∞–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω, —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î:

```bash
python manage.py shell
```

–í shell:
```python
from django.db import connection
try:
    connection.ensure_connection()
    print("‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ!")
except Exception as e:
    print(f"‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: {e}")
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫:

```bash
python manage.py check --database default
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ë–î:

```bash
python manage.py shell
```

–í shell:
```python
from django.conf import settings
print(settings.DATABASES['default'])
```

## üöÄ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
```bash
python manage.py runserver
```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
```bash
python manage.py migrate
```

3. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∑–∞–¥–∞—á:
```bash
python manage.py generate_problems_bulk --count 10 --grade 1
```

## üìù –£–ª—É—á—à–µ–Ω–∏—è –≤ –∫–æ–¥–µ

–Ø –¥–æ–±–∞–≤–∏–ª –≤ `core/database_utils.py`:
- ‚úÖ –¢–∞–π–º–∞—É—Ç—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (10 —Å–µ–∫)
- ‚úÖ –¢–∞–π–º–∞—É—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ (30 —Å–µ–∫)
- ‚úÖ –ü—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (CONN_MAX_AGE = 600 —Å–µ–∫)

–≠—Ç–æ –¥–æ–ª–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

Railway –º–æ–∂–µ—Ç:
- –ú–µ–Ω—è—Ç—å —Ö–æ—Å—Ç—ã –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –ë–î
- –ò–º–µ—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- –¢—Ä–µ–±–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è credentials

**–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å DATABASE_URL –≤ Railway Dashboard!**

---

**–î–∞—Ç–∞:** 27 –¥–µ–∫–∞–±—Ä—è 2024  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é
